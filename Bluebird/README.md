simple implementation of Bluebird`s coroutine function 
